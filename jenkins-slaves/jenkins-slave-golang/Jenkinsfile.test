pipeline {
    agent {
      label 'jenkins-slave-golang'
    }

    stages {
        stage ('Run Test') {
            steps {
              sh """
                  go version
              """
            }
        }
        stage ('Build Application') {
          steps {
            dir('jenkins-slaves/jenkins-slave-golang') {
              sh """
                  go build
              """
            }
          }
        }
        stage ('Ensure Build was Successful') {
          steps {
            dir('jenkins-slaves/jenkins-slave-golang') {
              sh """
                  ./hello
              """
            }
          }
        }
    }

}
